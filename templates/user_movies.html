{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between">
  <h1>Favorite Movies of {{ user.name }}</h1>
  <div>
    <a href="{{ url_for('add_movie', user_id=user.id) }}" class="btn btn-success">Add Movie</a>
  </div>
</div>

<table class="table">
  <thead>
  <tr>
    <th>ID</th>
    <th>Poster</th>
    <th>Title</th>
    <th>Year</th>
    <th>Rating</th>
    <th>Note</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  {% for user_movie in movies %}
  <tr>
    <td>{{ user_movie.movie.id }}</td>
    <td>
      <img src="{{ user_movie.movie.poster }}" alt="{{ user_movie.movie.name }}" style="width: 50px; height: auto;">
    </td>
    <td>{{ user_movie.movie.name }}</td>
    <td>{{ user_movie.movie.year }}</td>
    <td>{{ user_movie.movie.rating }}</td>
    <td>{{ user_movie.note }}</td>
    <td>
      <a href="{{ url_for('update_movie', user_id=user.id, movie_id=user_movie.movie.id) }}" class="btn btn-primary btn-sm">Edit</a>
      <a href="{{ url_for('delete_movie', user_id=user.id, movie_id=user_movie.movie.id) }}" class="btn btn-danger btn-sm"
         onclick="return confirm('Are you sure you want to delete this movie?');">Delete</a>
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>


{% endblock %}
